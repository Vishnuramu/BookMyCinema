{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Choose location â€” BookMyCinema</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

    <!-- PRELOAD IMAGES FOR FAST RENDER -->
    <link rel="preload" as="image" href="{% static 'movies/chennai1.png' %}">
    <link rel="preload" as="image" href="{% static 'movies/dindigul1.png' %}">
    <link rel="preload" as="image" href="{% static 'movies/madurai5.png' %}">
    <link rel="preload" as="image" href="{% static 'movies/covai1.png' %}">
    <link rel="preload" as="image" href="{% static 'movies/thiruchi.png' %}">

    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: "Poppins", sans-serif;
            overflow-x: hidden;
        }

        /* Faster popup backdrop (NO BLUR) */
        #city-popup-backdrop {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.55);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 9999;

            opacity: 0;
            transition: opacity 0.25s ease-out;
        }
        #city-popup-backdrop.show { opacity: 1; }

        /* Popup box */
        /* Desktop popup size */
#city-popup {
    width: 900px;      /* FIXED DESKTOP WIDTH */
    height: 420px;     /* FIXED DESKTOP HEIGHT */
    max-width: 90%;    /* ensures it doesn't break smaller screens */
    background: #fff;
    padding: 26px;
    border-radius: 14px;
    box-sizing: border-box;
    overflow-y: auto;
}

/* Mobile popup size */
@media (max-width: 600px) {
    #city-popup {
        width: 95%;        /* FULL WIDTH ON MOBILE */
        height: 420px;     /* FIXED MOBILE HEIGHT */
        padding: 18px;     /* LESS PADDING */
        border-radius: 12px;
    }
}


        #city-popup h2 {
            margin: 0;
            font-size: 26px;
            font-weight: 700;
        }

        #city-popup p {
            margin: 4px 0 18px;
            color: #666;
            font-size: 13px;
        }
        .popup-title {
    text-align: center;           /* CENTER TEXT */
    width: 100%;                  /* ENSURE FULL WIDTH */
    display: flex;
    flex-direction: column;
    align-items: center;          /* CENTER PERFECTLY */
    justify-content: center;
    margin-bottom: 20px;          /* Space below title */
}


        /* Image row (fast horizontal scroll) */
        .images-row {
            display: flex;
            gap: 22px;
            overflow-x: auto;
            padding: 10px 0;
            width: 100%;
            scrollbar-width: none;
            -webkit-overflow-scrolling: touch;
        }
        .images-row::-webkit-scrollbar { display: none; }

        .image-card {
            flex: 0 0 auto;
            width: 150px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: center;
        }

        .image-box {
            width: 150px;
            height: 180px;
            background: #fff;
            border-radius: 8px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .image-box img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .image-select-btn {
            width: 120px;
            padding: 10px;
            background: #1f2937;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
        }

        /* FULL PAGE LOADER */
#page-loader {
    position: fixed;
    inset: 0;
    background: #ffffff;
    z-index: 99999;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* SPINNER */
.loader-spinner {
    width: 48px;
    height: 48px;
    border: 4px solid #e5e7eb;
    border-top: 4px solid #1f2937;
    border-radius: 50%;
    animation: spin 0.9s linear infinite;
}

/* ANIMATION */
@keyframes spin {
    to { transform: rotate(360deg); }
}

    </style>
</head>

<body>
    <!-- PAGE LOADER -->
<div id="page-loader">
    <div class="loader-spinner"></div>
</div>


<!-- Include global header -->
{% include "homepage.html" %}

<!-- POPUP BACKDROP -->
<div id="city-popup-backdrop">
    <div id="city-popup">

        <div class="popup-title">
    <h2>Choose your location</h2>
    <p>(Currently the service is available in Chennai only)</p>
</div>


        <div class="images-row">

            <div class="image-card">
                <div class="image-box">
                    <img src="{% static 'movies/chennai1.png' %}" alt="Chennai">
                </div>
                <button class="image-select-btn" onclick="selectCityPopup('Chennai')">Chennai</button>
            </div>

            <div class="image-card">
                <div class="image-box">
                    <img src="{% static 'movies/dindigul1.png' %}" alt="Dindigul">
                </div>
                <button class="image-select-btn" onclick="selectCityPopup('Dindigul')">Dindigul</button>
            </div>

            <div class="image-card">
                <div class="image-box">
                    <img src="{% static 'movies/madurai5.png' %}" alt="Madurai">
                </div>
                <button class="image-select-btn" onclick="selectCityPopup('Madurai')">Madurai</button>
            </div>

            <div class="image-card">
                <div class="image-box">
                    <img src="{% static 'movies/covai1.png' %}" alt="Coimbatore">
                </div>
                <button class="image-select-btn" onclick="selectCityPopup('Coimbatore')">Coimbatore</button>
            </div>

            <div class="image-card">
                <div class="image-box">
                    <img src="{% static 'movies/thiruchi.png' %}" alt="Tiruchi">
                </div>
                <button class="image-select-btn" onclick="selectCityPopup('Tiruchi')">Tiruchi</button>
            </div>

        </div>

    </div>
</div>
<script>
window.addEventListener("load", () => {
    const loader = document.getElementById("page-loader");
    if (loader) {
        loader.style.opacity = "0";
        loader.style.transition = "opacity 0.3s ease";
        setTimeout(() => loader.remove(), 300);
    }
});
</script>

<script>
function openCityPopup() {
    const backdrop = document.getElementById("city-popup-backdrop");
    backdrop.style.display = "flex";

    // Fade-in effect (non-blocking)
    requestAnimationFrame(() => {
        backdrop.classList.add("show");
    });

    document.body.style.overflow = "hidden";
}

function closeCityPopup() {
    const backdrop = document.getElementById("city-popup-backdrop");
    backdrop.classList.remove("show");

    setTimeout(() => {
        backdrop.style.display = "none";
    }, 250);

    document.body.style.overflow = "";
}

function selectCityPopup(city) {
    closeCityPopup();
    window.location.href = "/homepage/" + city.toLowerCase() + "/";
}

// OPEN POPUP AFTER PAGE RENDERS (FASTER on MOBILE)
window.addEventListener("load", () => {
    setTimeout(openCityPopup, 100);
});
</script>

</body>
</html>
